<?php
$this->headTitle('Add Blog');
$this->mainMenu()->setActiveItemId('blog');
$this->pageBreadcrumbs()->setItems([
    'Beheer' => $this->url('beheer'),
    'Blogs' => $this->url('beheer/blog'),
    'Add Blog' => $this->url('beheer/blog', ['action' => 'add'])
]);
$form->setAttributes(array(
    'class' => 'form-horizontal',
    'enctype' => 'multipart/form-data'
));
?>
<hgroup id="headAdminTitle" class="col-sm-12 col-md-12 col-lg-12">
    <h1 id="index">ADD BLOG</h1>
</hgroup>
<!-- Breadcrumbs -->
<div class="col-lg-12 col-md-12 col-sm-12">
    <?= $this->pageBreadcrumbs()->render(); ?>
</div>
<?php echo $this->form()->openTag($form); ?>
<div class="col-lg-10 col-md-10 col-sm-10">
    <div class="form-group">
        <div class="col-sm-offset-1 col-sm-6 col-md-offset-1 col-md-6 col-lg-offset-1 col-lg-6">
            <?php echo $this->formHidden($form->get('online')); ?>
            <span id="blogOnline" class="setOnlineOffline glyphicon glyphicon-eye-open" aria-hidden="true"></span>&nbsp;&nbsp;<span id="blogOffline" class="setOnlineOffline glyphicon glyphicon-eye-close" aria-hidden="true"></span>
        </div>
        <div class="col-sm-5 col-md-5 col-lg-5">
            <?php echo (count($form->getMessages('online')) > 0 ? $form->getMessages('online')['isEmpty'] : '&nbsp;' ) ?>
        </div>
    </div>
    <div class="form-group">
        <?php echo $this->formLabel($form->get('twittered')); ?>
        <div class="col-sm-6 col-md-10 col-lg-10">
            <?php echo $this->formCheckbox($form->get('twittered')); ?>
        </div>
        <div class="col-sm-5 col-md-1 col-lg-1">
            <?php echo (count($form->getMessages('twittered')) > 0 ? $form->getMessages('twittered')['isEmpty'] : '&nbsp;' ) ?>
        </div>
    </div>
    <div class="form-group">
        <?php echo $this->formLabel($form->get('dateOnline')); ?>
        <div class="col-sm-2 col-md-2 col-lg-2">

            <div class='input-group date' id='datetimepicker1'>
                <?php echo $this->formText($form->get('dateOnline')); ?>
                <span class="input-group-addon">
                    <span class="glyphicon glyphicon-calendar"></span>
                </span>
            </div>
        </div>
        <div class="col-sm-5 col-md-5 col-lg-5">
            <?php echo (count($form->getMessages('dateOnline')) > 0 ? $form->getMessages('dateOnline')['isEmpty'] : '&nbsp;' ) ?>
        </div>
    </div>
    <div class="form-group">
        <?php echo $this->formLabel($form->get('dateOffline')); ?>
        <div class="col-sm-2 col-md-2 col-lg-2">
            <div class='input-group date' id='datetimepicker2'>
                <?php echo $this->formText($form->get('dateOffline')); ?>
                <span class="input-group-addon">
                    <span class="glyphicon glyphicon-calendar"></span>
                </span>
            </div>
        </div>
        <div class="col-sm-5 col-md-5 col-lg-5">
            <?php echo (count($form->getMessages('dateOffline')) > 0 ? $form->getMessages('dateOffline')['isEmpty'] : '&nbsp;' ) ?>
        </div>
    </div>
    <div class="form-group">
        <?php echo $this->formLabel($form->get('title')); ?>
        <div class="col-sm-6 col-md-6 col-lg-6">
            <?php echo $this->formText($form->get('title')); ?>
        </div>
        <div class="col-sm-5 col-md-5 col-lg-5">
            <?php echo (count($form->getMessages('title')) > 0 ? $form->getMessages('title')['isEmpty'] : '&nbsp;' ) ?>
        </div>
    </div>
    <div class="form-group">
        <?php echo $this->formLabel($form->get('introText')); ?>
        <div class="col-sm-6 col-md-10 col-lg-10">
            <?php echo $this->formTextarea($form->get('introText')); ?>
        </div>
        <div class="col-sm-5 col-md-1 col-lg-1">
            <?php echo (count($form->getMessages('introText')) > 0 ? $form->getMessages('introText')['isEmpty'] : '&nbsp;' ) ?>
        </div>
    </div>
    <div class="form-group">
        <?php echo $this->formLabel($form->get('text')); ?>
        <div class="col-sm-6 col-md-10 col-lg-10">
            <?php echo $this->formTextarea($form->get('text')); ?>
        </div>
        <div class="col-sm-5 col-md-1 col-lg-1">
            <?php echo (count($form->getMessages('text')) > 0 ? $form->getMessages('text')['isEmpty'] : '&nbsp;' ) ?>
        </div>
    </div>
    <hr/>
    <?php
    echo $this->partial('upload-images/partial/upload_image.phtml', array('formImage' => $formBlogImage));
    ?>
    <hr/>
</div>
<div class="col-lg-2 col-md-2 col-sm-2 blogOptions">
    <h2>Opties</h2>
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#categories">
        Categorie&euml;n
    </button>
</div>
<div class="col-sm-12 col-md-12 col-lg-12 " style="padding-left:0;">
    <button type="submit" id="submit" class="btn btn-primary">Opslaan</button> <a href="<?php echo $this->url['blogbeheer']; ?>" class="btn btn-default" title="Annuleren">Annuleren</a>
</div>  


<!-- Modal -->
<div class="modal fade" id="categories" tabindex="-1" role="dialog" aria-labelledby="categoriesLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Categorie(&euml;n)</h4>
            </div>
            <div class="modal-body">
                <h2><?php echo $this->translate('Categories'); ?></h2>
                <div class="form-group">
                    <div class="col-sm-12 col-md-12 col-lg-12">
                        <?php echo $this->formMultiCheckbox($form->get('categories')); ?>
                    </div>
                    <div class="col-sm-12 col-md-12 col-lg-12">
                        <?php echo (count($form->getMessages('categories')) > 0 ? $form->getMessages('categories')['isEmpty'] : '&nbsp;' ) ?>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


<?php echo $this->form()->closeTag($form); ?>

<script>
    $(document).ready(function () {
        checkOfflineOnline();
    });

    function checkOfflineOnline() {
        var onlineValue = $('input[name=online]').val();

        if (onlineValue == 1) {
            $("span#blogOnline").trigger("click");
        } else {
            $("span#blogOffline").trigger("click");
        }
    }

    $("span#blogOffline").on("click", function () {
        $("span#blogOnline").removeClass('blogOnlineActive');
        $(this).addClass('blogOfflineActive');
        $('input[name=online]').val(0);
    });

    $("span#blogOnline").on("click", function () {
        $("span#blogOffline").removeClass('blogOfflineActive');
        $(this).addClass('blogOnlineActive');
        $('input[name=online]').val(1);
    });

    $('#categories').on('shown.bs.modal', function () {
    });


    $(document).on('change', ':file', function () {
        var input = $(this),
                numFiles = input.get(0).files ? input.get(0).files.length : 1,
                label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
        input.trigger('fileselect', [numFiles, label]);

        $('input[name=blogImageFileName]').val(label);
    });

    $("input[name=dateOnline]").datetimepicker({
        format: 'yyyy-mm-dd hh:ii',
        autoclose: true,
        todayBtn: true,
        startDate: "2013-02-14 10:00",
        minuteStep: 1
    });
    $("input[name=dateOffline]").datetimepicker({
        format: 'yyyy-mm-dd hh:ii',
        autoclose: true,
        todayBtn: true,
        startDate: "2013-02-14 10:00",
        minuteStep: 1
    });


</script>